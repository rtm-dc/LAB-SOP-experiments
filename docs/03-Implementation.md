# Implementation

_(Draft 2023-05-30)_

In our implementation of a random assignment, we follow a set of checking procedures along the way to the final randomization, and we do a final check of critical design and data features immediately before actual assignment.

## Along the Way

1. Develop a correct participant flow diagram.
2. Formally review randomization code.
3. Remove duplicates.
4. Confirm that assignment sample is correct. It should include everyone who is eligible, and no one who is ineligible.
5. Confirm that assignment probabilities are correct.

## Immediately Before the Final Randomization

An overarching goal is to only run the final assignment _once_.

1. Check for and remove duplicates.  
2. Run lottery with fake seed.  
3. Check participant flow against various tables generated by randomization code.

Once everything in this section has been implemented, in order, and is satisfactory, proceed to run the final randomization.

## The Final Randomization

1. Run final assignments using the final asssignment seed, which is set using the procedure in Section \@ref(sec-set-seed).

## Immediately After the Final Randomization

1. Document what we did along the way and immediately before randomization. Pay special attention to unexpected issues.  
